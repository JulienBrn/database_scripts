processing:
  - duplicate_over:
      channel_name: ['LED(\d+)', 'ASND', 'TTLP(1|3|4|8)']
    event_name: '{channel_name}'
    method: output_binary_wave
    method_params:
      filter_expr: 'channel_name=="{channel_name}"'
      state_expr: '_P'
      count_expr: '_L'

  - duplicate_over:
      channel_name: ['TTLP(2|5|6|7)']
    event_name: '{channel_name}'
    method: input_binary_wave
    method_params:
      filter_expr: 'channel_name=="{channel_name}"'
      state_expr: '_P'

  - duplicate_over:
      channel_name: ['L(\d+)']
    event_name: '{channel_name}'
    method: input_binary_wave
    method_params:
      filter_expr: 'channel_name=="{channel_name}"'
      state_expr: '_V'

  - duplicate_over:
      side: ['_P', '_V']
    event_name: 'PAD{side}'
    method: input_binary_wave
    method_params:
      filter_expr: 'channel_name=="PAD"'
      state_expr: '{side}'

  - duplicate_over:
      channel_name: ['LK(\d+)']
    event_name: '{channel_name}_lick'
    method: input_binary_wave
    method_params:
      filter_expr: 'channel_name=="{channel_name}"'
      state_expr: '_V'
  
  - duplicate_over:
      channel_name: ['LK(\d+)']
    event_name: '{channel_name}_reward'
    method: output_accumulator_binary_wave
    method_params:
      filter_expr: 'channel_name=="{channel_name}"'
      state_expr: '_L'
      duration: 0.2

  - event_name: 'polytask_linechange'
    method: 'step_wave'
    method_params:
      filter_expr: 'family==10'
      state_expr: '_T'

  - event_name: 'zone_change'
    method: 'step_wave'
    method_params:
      filter_expr: 'family==9'
      state_expr: '_X'

  - event_name: 'RD'
    method: 'event'
    method_params:
      filter_expr: 'channel_name=="RD"'
    metadata:
      read_value: '_T'

  - event_name: 'pause'
    method: 'event'
    method_params:
      filter_expr: 'family==11'
    metadata:
      cause: '_V'


display:
  rename:
    TTLP1: cue
    PAD_P: PAD_left
    PAD_V: PAD_right
    L1: LEVER_left
    L2: LEVER_right


    
